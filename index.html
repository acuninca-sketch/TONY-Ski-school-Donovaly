<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ly≈æiarska ≈°kola - Rezerv√°cie</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f0f8ff;
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 10px;
    }

    header {
      text-align: center;
      margin: 20px 0;
    }

    h1 {
      font-size: 1.8rem;
      margin-bottom: 10px;
    }

    table {
      width: 100%;
      max-width: 500px;
      border-collapse: collapse;
      margin-bottom: 20px;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: center;
      font-size: 0.9rem;
    }

    th {
      background: #004080;
      color: white;
    }

    tr:nth-child(even) {
      background: #f9f9f9;
    }

    .available {
      background: #d4edda;
    }

    .booked {
      background: #f8d7da;
      color: #721c24;
    }

    .btn {
      padding: 8px 15px;
      border: none;
      background: #007bff;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.9rem;
      margin: 10px 5px;
    }

    .btn:disabled {
      background: #aaa;
      cursor: not-allowed;
    }

    #reservationsList {
      margin-top: 20px;
      max-width: 500px;
      width: 100%;
      background: white;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 10px;
      display: none;
    }
  </style>
</head>
<body>
  <header>
    <h1>‚õ∑Ô∏è Ly≈æiarska ≈°kola</h1>
    <p>Rezervujte si viac hod√≠n naraz</p>
  </header>

  <h2>Dostupn√© hodiny</h2>
  <form id="bookingForm">
    <table id="schedule">
      <thead>
        <tr>
          <th>ƒåas</th>
          <th>Stav</th>
          <th>Vybra≈•</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <label>Meno: <input type="text" id="name" required></label><br><br>
    <label>Telef√≥n: <input type="tel" id="phone" required></label><br><br>

    <button type="submit" class="btn">Rezervova≈• vybran√©</button>
    <button type="button" class="btn" onclick="showReservations()">Zobrazi≈• rezerv√°cie</button>
  </form>

  <div id="reservationsList">
    <h3>üìã Zoznam rezerv√°ci√≠</h3>
    <ul id="reservationsUl"></ul>
  </div>

  <footer>
    <p>¬© 2025 Ly≈æiarska ≈°kola ‚Äì testovacia verzia</p>
  </footer>

  <script>
    const times = [
      "09:00","10:00","11:00","12:00","13:00",
      "13:30","14:30","15:30","16:30","17:30","18:30","19:30"
    ];

    const tbody = document.querySelector("#schedule tbody");

    // Naƒç√≠taj rezerv√°cie z LocalStorage
    let reservations = JSON.parse(localStorage.getItem("reservations")) || [];

    // Vykresli tabuƒæku hod√≠n
    times.forEach(time => {
      const row = document.createElement("tr");

      const timeCell = document.createElement("td");
      timeCell.textContent = time;
      row.appendChild(timeCell);

      const statusCell = document.createElement("td");
      const isBooked = reservations.some(r => r.time === time);
      if (isBooked) {
        statusCell.textContent = "Obsaden√©";
        statusCell.classList.add("booked");
      } else {
        statusCell.textContent = "Voƒæn√©";
        statusCell.classList.add("available");
      }
      row.appendChild(statusCell);

      const selectCell = document.createElement("td");
      const checkbox = document.createElement("input");
      checkbox.type = "checkbox";
      checkbox.disabled = isBooked;
      selectCell.appendChild(checkbox);
      row.appendChild(selectCell);

      tbody.appendChild(row);
    });

    // Rezerv√°cia hod√≠n
    document.getElementById("bookingForm").onsubmit = function(e) {
      e.preventDefault();
      const name = document.getElementById("name").value;
      const phone = document.getElementById("phone").value;

      if (!name || !phone) {
        alert("Pros√≠m, vypl≈àte meno a telef√≥n.");
        return;
      }

      const rows = tbody.querySelectorAll("tr");
      rows.forEach(row => {
        const statusCell = row.children[1];
        const checkbox = row.children[2].querySelector("input");

        if (checkbox.checked && statusCell.textContent === "Voƒæn√©") {
          statusCell.textContent = "Obsaden√©";
          statusCell.classList.remove("available");
          statusCell.classList.add("booked");
          checkbox.disabled = true;

          // ulo≈æenie do LocalStorage
          reservations.push({
            name,
            phone,
            time: row.children[0].textContent,
            date: new Date().toLocaleDateString()
          });
        }
      });

      localStorage.setItem("reservations", JSON.stringify(reservations));
      alert("Rezerv√°cia potvrden√° pre " + name + " (" + phone + ")");
      document.getElementById("bookingForm").reset();
    }

    // Zobrazenie rezerv√°ci√≠
    function showReservations() {
      const listDiv = document.getElementById("reservationsList");
      const listUl = document.getElementById("reservationsUl");
      listUl.innerHTML = "";

      if (reservations.length === 0) {
        listUl.innerHTML = "<li>≈Ωiadne rezerv√°cie</li>";
      } else {
        reservations.forEach(r => {
          const li = document.createElement("li");
          li.textContent = `${r.date} - ${r.time} (${r.name}, ${r.phone})`;
          listUl.appendChild(li);
        });
      }

      listDiv.style.display = "block";
    }
  </script>
</body>
</html>
